---
title: 첫 회사에서의 10개월 (3)
tags: [REVIEW]
author: 김태영
---

## Part2. 2022.12.01 ~ 2023.12.31

- 연말이 되면서 공모주 수도 줄어들고, 전체적으로 한가해졌다.
- ~~이 틈을 타~~ 구멍난 부분을 메꾸기 시작했다

### 애플로그인 오류 수정

- 애플 로그인 관련 키(p8)가 만료되어서 새로운 키를 발급받아 해결
  - 관련 포스팅을 적던지 해야겠다 기억이 잘안나기 시작...

### 데일리 배치, 실시간 크롤러 수정

- python-script로 되어있는 데일리 배치를 거의 매일 수정했다
  - 데이터가 없는 경우 예외처리
  - 필요한 데이터 추가 수집
    - 의무보유확약비율, 상단이상구간 등
- 공모주 실시간 경쟁률 크롤러 수정
  - 안정화 및 경쟁률 산법 수정

### Graphql 서버 ncp로 이전 및 docker로 재구성

- 회사는 ncp를 사용했을시 사용금액의 75% 가량을 지원받을 수 있었다.
- 따라서 가능한 모든 서비스를 ncp로 이전하고 싶었다.
  - cto님께 서버 이전을 제안했고, 허락 받아 이전을 진행했다
- serverless 환경을 청산하고 일반 EC2 서버에 docker로 올리기로 했다
- AWS 외에도 돈이 새는 곳이 하나 더 있었는데 바로 hasura-cloud였다.

  - 매월 15만원 가량을 지불해야했는데 hasura 서버를 총 3개 정도 운영하고 있었다.
  - datadog을 이용한 analysis 서비스를 제공해주긴 했지만 그외에는 특별한게 없었다.
  - 따라서 hasura-cloud를 해지하고, hasura를 docker로 올리기로 했다.(따로 포스팅해야할 부분)
    - 딱히 어려운건 없었다.
    - 아 있었다. hasura의 metadata를 옮기는 과정이 까다롭긴 했다.
    - 정확히 동일하게 이전해야 했기 때문에(물론 이전할 내용이 많진 않았지만) 작은 부분에서의 차이가 발생할 수 있어서 신경을 많이 썼었던것 같다

- 현재는 k8s 환경으로 바꿔서 이런 서버들을 오케스트레이션을 해보고 싶은데, 요즘 너무 바빠 어떻게 될지는 모르겠다.

### 푸시 알림 기능 신규개발

- 공모주 환불기간 알림 신규 개발
- 공모주 찜기능 개발에 따라 푸시 알림 기능 추가 개발

### Etc

- ncp는 솔직히 없는게 별로 없다. s3 뺴고는 다 쓸만함
- 근데 ncp s3 sdk는 어떻게 된건지 내가 잘못 짠건지 모르겠지만 뭐 전송이 되질 않는다
  - 나중에 알아봐야겠지만 아무튼 뭐 지금은 aws s3 sdk를 사용하고 있다
- 아마 이 시기에 peak(가제)라는 신규 어플 작업을 많이 했던것 같은데 지금은 회사 사정에 따라 고인이 되부렀다
  - 기록하기는 어려울거같고 peak 작업기를 따로 적어보면 좋을것같다
